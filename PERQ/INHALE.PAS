program Inhale;

{ Takes the input file, which is a bunch of CR-separated ascii decimal
  numbers (generated by exhale.pas here on the PERQ, or a similar utility
  on the mac side) and writes it out.
  The usecase is "make an image on the mac side, generate an ascii version
  in the PIC format (based on the SIGUTILS.PAS utilities) and copy rsx: it
  over.  The perqEmu copy into and out of doesn't work for binaries
}

imports Memory from Memory; { CreateSegment }
imports FileSystem from FileSystem; { FSLookUp }
imports MultiRead from MultiRead; { MultiRead }

const
    filename = 'snork.txt';
    outputFilename = '3rcc-exhale.pic';

type
    IntType = 0..255;

var
    value: IntType;
    incoming: Text;
    outgoing: packed file of IntType;
    
begin
    Writeln('grooby');
    reset(incoming, filename);
    rewrite(outgoing, outputFilename);
    
    while not eof(incoming) do begin
        Readln(incoming, value);
        outgoing^ := value;
        Put(outgoing);
    end;

    close(outgoing);
end.
